# üìã S1-006: CI pipeline

## –ú–µ—Ç–∞

–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ GitHub Actions pipeline, —â–æ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–∞ –∫–æ–∂–µ–Ω PR —Ç–∞ push –≤ main: lint ‚Üí type check ‚Üí unit tests. –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è ‚Äî –∑–ª–∞–º–∞–Ω–∏–π –∫–æ–¥ –Ω–µ –ø–æ—Ç—Ä–∞–ø–ª—è—î –≤ main, —è–∫—ñ—Å—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ S1-001 (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π), S1-002 (ruff/mypy –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è), S1-003 (PostgreSQL –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤ —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É). –î–ª—è Sprint 1 CI –∑–∞–ø—É—Å–∫–∞—î —Ç—ñ–ª—å–∫–∏ unit-—Ç–µ—Å—Ç–∏ (–±–µ–∑ –ë–î). –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –∑ PostgreSQL —É Docker ‚Äî –¥–æ–¥–∞—é—Ç—å—Å—è –∫–æ–ª–∏ –∑'—è–≤–ª—è—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω—ñ integration tests.

---

## Acceptance Criteria

- [ ] CI –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞ –∫–æ–∂–µ–Ω PR –¥–æ `main`
- [ ] CI –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–∞ push –≤ `main` (–±–µ–∑ AI review)
- [ ] Pipeline: ruff check ‚Üí ruff format --check ‚Üí mypy ‚Üí pytest ‚Üí AI review (—Ç—ñ–ª—å–∫–∏ PR)
- [ ] AI review –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –¢–Ü–õ–¨–ö–ò –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è lint + typecheck + test
- [ ] AI review –∑–∞–ª–∏—à–∞—î inline-–∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –¥–æ PR –∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è–º–∏
- [ ] –ë—É–¥—å-—è–∫–∏–π fail lint/typecheck/test ‚Äî –±–ª–æ–∫—É—î merge PR
- [ ] AI review fail –ù–ï –±–ª–æ–∫—É—î merge (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ API)
- [ ] `uv` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (–∑ –∫–µ—à—É–≤–∞–Ω–Ω—è–º)
- [ ] Pipeline –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –∑–∞ < 5 —Ö–≤–∏–ª–∏–Ω (3 parallel jobs + AI review)
- [ ] Badge –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º CI —É README

---

## .github/workflows/ci.yaml

```yaml
name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

# –°–∫–∞—Å—É–≤–∞—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π run —è–∫—â–æ –∑'—è–≤–∏–≤—Å—è –Ω–æ–≤–∏–π push –≤ —Ç–æ–π —Å–∞–º–∏–π PR
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

env:
  PYTHON_VERSION: "3.13"
  UV_CACHE_DIR: /tmp/.uv-cache

jobs:
  lint:
    name: Lint & Format
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: astral-sh/setup-uv@v5
        with:
          enable-cache: true
          cache-dependency-glob: "uv.lock"

      - name: Install dependencies
        run: uv sync --frozen --group dev

      - name: Ruff check
        run: uv run ruff check src/ tests/

      - name: Ruff format check
        run: uv run ruff format --check src/ tests/

  typecheck:
    name: Type Check
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: astral-sh/setup-uv@v5
        with:
          enable-cache: true
          cache-dependency-glob: "uv.lock"

      - name: Install dependencies
        run: uv sync --frozen --group dev

      - name: Mypy
        run: uv run mypy src/

  test:
    name: Tests
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: astral-sh/setup-uv@v5
        with:
          enable-cache: true
          cache-dependency-glob: "uv.lock"

      - name: Install dependencies
        run: uv sync --frozen --group dev

      - name: Run tests
        run: uv run pytest --tb=short -q
        env:
          ENVIRONMENT: testing

  ai-review:
    name: AI Code Review
    runs-on: ubuntu-latest
    # –ó–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –¢–Ü–õ–¨–ö–ò –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ç—Ä—å–æ—Ö jobs
    needs: [lint, typecheck, test]
    # –¢—ñ–ª—å–∫–∏ –¥–ª—è PR (–Ω–µ –¥–ª—è push –≤ main) —ñ –Ω–µ –¥–ª—è fork PR
    if: >
      github.event_name == 'pull_request' &&
      github.event.pull_request.head.repo.full_name == github.repository
    permissions:
      contents: read
      pull-requests: write
    steps:
      - uses: KonstZiv/ai-code-reviewer@v1
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          google_api_key: ${{ secrets.GOOGLE_API_KEY }}
```

### –ü–æ—è—Å–Ω–µ–Ω–Ω—è —Ä—ñ—à–µ–Ω—å

**–¢—Ä–∏ –æ–∫—Ä–µ–º—ñ jobs** –∑–∞–º—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ ‚Äî –ø–∞—Ä–∞–ª–µ–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è. Lint, typecheck —ñ tests –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ. –Ø–∫—â–æ lint –ø–∞–¥–∞—î ‚Äî –Ω–µ —á–µ–∫–∞—î–º–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤. –¢–∞–∫–æ–∂ —á—ñ—Ç–∫—ñ—à–µ –≤–∏–¥–Ω–æ —â–æ —Å–∞–º–µ –∑–ª–∞–º–∞–ª–æ—Å—è (lint vs types vs tests).

**`uv sync --frozen`** ‚Äî –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Å—Ç—Ä–æ–≥–æ –∑ `uv.lock`, –Ω–µ –æ–Ω–æ–≤–ª—é—î lockfile. –ì–∞—Ä–∞–Ω—Ç—É—î –≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞–Ω—ñ—Å—Ç—å. –Ø–∫—â–æ lockfile –∑–∞—Å—Ç–∞—Ä—ñ–≤ ‚Äî fail –∑ –∑—Ä–æ–∑—É–º—ñ–ª–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º.

**`--group dev`** –∑–∞–º—ñ—Å—Ç—å `--all-extras` ‚Äî –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ `media` group (whisper + PyTorch ~2GB). Unit-—Ç–µ—Å—Ç–∏ –¥–ª—è VideoProcessor fallback –º–æ–∫–∞—é—Ç—å whisper.

**`astral-sh/setup-uv@v5`** ‚Äî –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π Action –≤—ñ–¥ Astral (–∞–≤—Ç–æ—Ä–∏ uv/ruff). –ö–µ—à—É—î `~/.cache/uv` –º—ñ–∂ runs, —â–æ –∑–Ω–∞—á–Ω–æ –ø—Ä–∏—Å–∫–æ—Ä—é—î –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π.

**`concurrency` –∑ `cancel-in-progress`** ‚Äî —è–∫—â–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫ –ø—É—à–∏—Ç—å –∫—ñ–ª—å–∫–∞ –∫–æ–º—ñ—Ç—ñ–≤ –ø—ñ–¥—Ä—è–¥ –≤ PR, –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ runs —Å–∫–∞—Å–æ–≤—É—é—Ç—å—Å—è. –ï–∫–æ–Ω–æ–º–∏—Ç—å GitHub Actions minutes.

**`ENVIRONMENT: testing`** ‚Äî pytest –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∑ testing environment. Settings –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î defaults (–±–µ–∑ `.env` —Ñ–∞–π–ª—É).

**`ai-review` –∑ `needs: [lint, typecheck, test]`** ‚Äî AI Code Review –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ç—Ä—å–æ—Ö –±–∞–∑–æ–≤–∏—Ö jobs. –õ–æ–≥—ñ–∫–∞: –Ω–µ–º–∞—î —Å–µ–Ω—Å—É –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ Gemini API –Ω–∞ —Ä–µ–≤ º—é –∫–æ–¥—É, —è–∫–∏–π –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å lint –∞–±–æ —Ç–µ—Å—Ç–∏. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î [ai-code-reviewer](https://github.com/KonstZiv/ai-code-reviewer) ‚Äî GitHub Action, —â–æ –∞–Ω–∞–ª—ñ–∑—É—î diff PR —á–µ—Ä–µ–∑ Gemini —ñ –∑–∞–ª–∏—à–∞—î inline-–∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è–º–∏, severity badges —Ç–∞ –∫–Ω–æ–ø–∫–∞–º–∏ "Apply suggestion".

**`if: github.event_name == 'pull_request'`** ‚Äî AI review —Ç—ñ–ª—å–∫–∏ –¥–ª—è PR, –Ω–µ –¥–ª—è push –≤ main (–Ω–∞ push –Ω–µ–º–∞—î –∫—É–¥–∏ –∑–∞–ª–∏—à–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ). Fork PRs –≤–∏–∫–ª—é—á–µ–Ω—ñ ‚Äî secrets –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ.

**`permissions: pull-requests: write`** ‚Äî –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–ª—è `GITHUB_TOKEN`, —â–æ–± –±–æ—Ç –º—ñ–≥ –∑–∞–ª–∏—à–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –¥–æ PR. `GITHUB_TOKEN` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ç–æ–∫–µ–Ω, –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î —Ä—É—á–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è.

---

## Secrets

–î–ª—è AI Code Review –ø–æ—Ç—Ä—ñ–±–µ–Ω –æ–¥–∏–Ω —Å–µ–∫—Ä–µ—Ç:

| Secret | –î–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ | –ü—Ä–∏–º—ñ—Ç–∫–∞ |
| :---- | :---- | :---- |
| `GOOGLE_API_KEY` | [Google AI Studio](https://aistudio.google.com/) ‚Üí Get API key ‚Üí Create | Gemini free tier: 15 req/min, –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –±—ñ–ª—å—à–æ—Å—Ç—ñ –ø—Ä–æ—î–∫—Ç—ñ–≤ |

**`GITHUB_TOKEN`** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π, —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è GitHub –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ workflow run. –ù–µ –ø–æ—Ç—Ä–µ–±—É—î —Ä—É—á–Ω–æ–≥–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è.

**–®–ª—è—Ö:** Repository ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí New repository secret ‚Üí Name: `GOOGLE_API_KEY`, Secret: –∫–ª—é—á (`AIza...`).

---

## Branch Protection Rules

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è CI ‚Äî —É–≤—ñ–º–∫–Ω—É—Ç–∏ branch protection –¥–ª—è `main`:

1. GitHub ‚Üí Settings ‚Üí Branches ‚Üí Add rule
2. Branch name pattern: `main`
3. –£–≤—ñ–º–∫–Ω—É—Ç–∏:
   - ‚úÖ Require a pull request before merging
   - ‚úÖ Require status checks to pass before merging
     - –î–æ–¥–∞—Ç–∏: `Lint & Format`, `Type Check`, `Tests`
   - ‚úÖ Require branches to be up to date before merging

> `AI Code Review` –ù–ï –¥–æ–¥–∞—î–º–æ —è–∫ required status check ‚Äî –≤—ñ–Ω `allow_failure` –∑–∞ —Å–≤–æ—î—é –ø—Ä–∏—Ä–æ–¥–æ—é (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ API, –º–æ–∂–µ –±—É—Ç–∏ rate limited). –ê–ª–µ –π–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–¥–Ω–æ —è–∫ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –¥–æ PR.

> –¶–µ –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ CI ‚Äî —Ä–æ–±–∏—Ç—å—Å—è –≤—Ä—É—á–Ω—É –æ–¥–∏–Ω —Ä–∞–∑ –≤ GitHub UI.

---

## README badge

–î–æ–¥–∞—Ç–∏ –Ω–∞ –ø–æ—á–∞—Ç–æ–∫ README.md:

```markdown
[![CI](https://github.com/<org>/course-supporter/actions/workflows/ci.yaml/badge.svg)](https://github.com/<org>/course-supporter/actions/workflows/ci.yaml)
```

---

## –ú–∞–π–±—É—Ç–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è (–ù–ï –≤ —Ü—ñ–π –∑–∞–¥–∞—á—ñ)

–¶—ñ –ø—É–Ω–∫—Ç–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –¥–ª—è –ø—ñ–∑–Ω—ñ—à–∏—Ö –∑–∞–¥–∞—á, –∞–ª–µ CI –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —ó—Ö –ø—ñ–¥—Ç—Ä–∏–º—É—î:

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –∑ PostgreSQL

–ö–æ–ª–∏ –∑'—è–≤–ª—è—Ç—å—Å—è —Ç–µ—Å—Ç–∏, —â–æ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –ë–î ‚Äî –¥–æ–¥–∞—Ç–∏ service container:

```yaml
  test-integration:
    name: Integration Tests
    runs-on: ubuntu-latest
    services:
      postgres:
        image: pgvector/pgvector:pg17
        env:
          POSTGRES_USER: test
          POSTGRES_PASSWORD: test
          POSTGRES_DB: test_db
        ports:
          - 5432:5432
        options: >-
          --health-cmd pg_isready
          --health-interval 5s
          --health-timeout 5s
          --health-retries 5
    steps:
      - uses: actions/checkout@v4
      - uses: astral-sh/setup-uv@v5
      - run: uv sync --frozen --group dev
      - name: Run migrations
        run: uv run alembic upgrade head
        env:
          POSTGRES_HOST: localhost
          POSTGRES_USER: test
          POSTGRES_PASSWORD: test
          POSTGRES_DB: test_db
      - name: Run integration tests
        run: uv run pytest tests/integration/ --tb=short
        env:
          ENVIRONMENT: testing
          POSTGRES_HOST: localhost
          POSTGRES_USER: test
          POSTGRES_PASSWORD: test
          POSTGRES_DB: test_db
```

### Coverage reporting

```yaml
      - name: Run tests with coverage
        run: uv run pytest --cov --cov-report=xml
      - uses: codecov/codecov-action@v4
        with:
          file: coverage.xml
```

### Dependabot

```yaml
# .github/dependabot.yaml
version: 2
updates:
  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
```

---

## –ö—Ä–æ–∫–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

1. –ó–∞–º—ñ–Ω–∏—Ç–∏ –∑–∞–≥–ª—É—à–∫—É `.github/workflows/ci.yaml` –Ω–∞ –ø–æ–≤–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é (4 jobs)
2. –î–æ–¥–∞—Ç–∏ `GOOGLE_API_KEY` —Å–µ–∫—Ä–µ—Ç –≤ GitHub: Settings ‚Üí Secrets ‚Üí Actions
3. Commit + push –≤ feature branch
4. –°—Ç–≤–æ—Ä–∏—Ç–∏ PR –¥–æ main ‚Äî –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—å —â–æ CI –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
5. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ lint, typecheck, test –ø—Ä–æ—Ö–æ–¥—è—Ç—å –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ
6. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ AI review –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è 3 jobs —ñ –∑–∞–ª–∏—à–∞—î –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –¥–æ PR
7. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å pipeline (target: < 5 —Ö–≤)
8. –î–æ–¥–∞—Ç–∏ CI badge –≤ README
9. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ branch protection rules –≤ GitHub UI (lint + typecheck + test —è–∫ required, AI review ‚Äî –Ω—ñ)
10. Merge PR

---

## –ü—Ä–∏–º—ñ—Ç–∫–∏

- **GitHub Actions minutes** ‚Äî –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω –¥–∞—î 2000 —Ö–≤/–º—ñ—Å—è—Ü—å –¥–ª—è public repos, 500 —Ö–≤ –¥–ª—è private. –¢—Ä–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ jobs + AI review ‚âà 4‚Äì5 —Ö–≤ –Ω–∞ –æ–¥–∏–Ω PR run. AI review –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Gemini API (free tier: 15 req/min).
- **uv.lock –û–ë–û–í'–Ø–ó–ö–û–í–û –≤ Git** ‚Äî –±–µ–∑ lockfile `uv sync --frozen` fail-–∏—Ç—å. Lockfile –≥–∞—Ä–∞–Ω—Ç—É—î —â–æ CI –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î —Ç—ñ –∂ –≤–µ—Ä—Å—ñ—ó —â–æ —ñ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫.
- **Secrets** ‚Äî `GOOGLE_API_KEY` –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–ª—è AI review —ñ –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ eval pipeline (S1-031). LLM keys –¥–ª—è Anthropic/OpenAI/DeepSeek –¥–æ–¥–∞—é—Ç—å—Å—è –ø—ñ–∑–Ω—ñ—à–µ.
- **Fork PRs** ‚Äî AI review –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞—î—Ç—å—Å—è (secrets –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ). –¶–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ GitHub –¥–ª—è –±–µ–∑–ø–µ–∫–∏.
- –Ø–∫—â–æ –∑'—è–≤–ª—è—Ç—å—Å—è flaky tests ‚Äî –¥–æ–¥–∞—Ç–∏ `pytest-retry` —ñ `--retries 2` —Ç—ñ–ª—å–∫–∏ –¥–ª—è CI.
